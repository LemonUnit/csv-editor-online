{"version":3,"sources":["editors/CSVEditor.tsx","components/Navigation.tsx","editors/JSONEditor.tsx","editors/DataGridEditor.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["CSVDelimiter","NAVIGATION_HEIGHT","CONFIG_BAR_HEIGHT","Navigation","renderLogo","className","renderButtons","buttons","EditorMode","CSV","GRID","JSON","map","mode","Item","key","onClick","props","onModeChange","theme","defaultSelectedKeys","style","lineHeight","Header","this","Component","defaultState","csv","editorHeight","delimiter","SEMICOLON","CSVEditor","state","window","localStorage","getItem","updateEditorHeight","setState","innerHeight","parseSourceItemsToCsv","csvString","source","updateSourceItemsByCsvString","sourceItems","onSourceChange","handleChange","handleDelimiterChange","e","value","target","trim","updateDelimiter","confirm","title","content","onOk","updateCSVStringDelimiter","onCancel","setItem","renderConfigBar","Group","onChange","size","COMMA","VARTICAL_BAR","item","index","addEventListener","removeEventListener","name","width","height","editorProps","$blockScrolling","json","JSONEditor","parseSourceItemsToJson","stringify","parse","MIN_GRID_ROWS","MIN_GRID_COLUMNS","getEmptyRow","columnsCount","row","i","getMultipleEmptyRows","rowsCount","emptyRow","rows","activeRow","activeCol","grid","DataGridEditor","parseSourceItemsToGrid","sourceRowsLength","length","rowIndex","rowColumnsLength","rowCellIndex","_cell","columnsToAdd","addColumnIndex","rowsToAdd","addRowIndex","updateSourceItemsByDataGrid","reverseGridRows","reverse","notEmptyGridRowIndex","findIndex","rowCells","some","cell","Boolean","gridRows","slice","gridRowIndex","gridRowsLength","notEmptyCellIndex","nonEmptyCells","nonEmptyCellIndex","addNewRowIfLastIsActive","onActivate","column","debounce","data","modeToComponentMap","Object","freeze","App","handleModeChange","handleSourceChange","EditorComponent","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.1a335194.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport AceEditor from \"react-ace\";\nimport { Radio, Modal } from \"antd\";\nimport { RadioChangeEvent } from \"antd/lib/radio\";\n// @ts-ignore\nimport * as csvString from \"csv-string\";\nimport brace from \"brace\"; // eslint-disable-line @typescript-eslint/no-unused-vars\n\nimport \"brace/theme/github\";\nimport \"brace/mode/json\";\n\nimport { EditorProps } from \"./types\";\nimport { NAVIGATION_HEIGHT, CONFIG_BAR_HEIGHT } from \"../components/Navigation\";\n\nenum CSVDelimiter {\n  SEMICOLON = \";\",\n  COMMA = \",\",\n  VARTICAL_BAR = \"|\"\n}\n\ninterface Props extends EditorProps { }\n\ninterface State {\n  csv: string;\n  delimiter: CSVDelimiter;\n  editorHeight: number;\n}\n\nconst defaultState: State = {\n  csv: \"\",\n  editorHeight: 0,\n  delimiter: CSVDelimiter.SEMICOLON\n}\n\nexport class CSVEditor extends Component<Props, State> {\n  state = {\n    ...defaultState,\n    delimiter: 'localStorage' in window\n      ? window.localStorage.getItem('delimiter') as CSVDelimiter || CSVDelimiter.SEMICOLON\n      : CSVDelimiter.SEMICOLON\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', () => this.updateEditorHeight())\n\n    this.updateEditorHeight()\n    this.parseSourceItemsToCsv();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', () => this.updateEditorHeight())\n\n    this.setState(defaultState);\n  }\n\n  updateEditorHeight = () => this.setState({\n    editorHeight: window.innerHeight - NAVIGATION_HEIGHT - CONFIG_BAR_HEIGHT\n  })\n\n  parseSourceItemsToCsv = () => this.setState({\n    csv: csvString.stringify(this.props.source, this.state.delimiter)\n  });\n\n  updateSourceItemsByCsvString = () => {\n    const sourceItems = csvString.parse(this.state.csv, this.state.delimiter);\n\n    this.props.onSourceChange(sourceItems);\n  }\n\n  handleChange = (csv: string) => this.setState({\n    csv\n  }, () => this.updateSourceItemsByCsvString());\n\n  handleDelimiterChange = (e: RadioChangeEvent) => {\n    const { value } = e.target;\n\n    if (!this.state.csv.trim()) {\n      return this.updateDelimiter(value);\n    }\n\n    Modal.confirm({\n      title: 'Do you want to update CSV string to new delimiter?',\n      content: '',\n      onOk: () => this.updateCSVStringDelimiter(value),\n      onCancel: () => this.updateDelimiter(value)\n    });\n  }\n\n  updateCSVStringDelimiter = (delimiter: CSVDelimiter) => this.setState({\n    csv: csvString.stringify(csvString.parse(this.state.csv, this.state.delimiter), delimiter)\n  }, () => this.updateDelimiter(delimiter));\n\n  updateDelimiter = (delimiter: CSVDelimiter) => this.setState({\n    delimiter\n  }, () => {\n    if ('localStorage' in window) {\n      window.localStorage.setItem('delimiter', delimiter);\n    }\n  });\n\n  renderConfigBar = () => (\n    <div className=\"ConfigBar\">\n      <div className=\"ConfigBarWidget\">\n        <span className=\"ConfigBarWidgetLabel\">CSV Delimeter:</span>\n        <span className=\"ConfigBarWidgetContent\">\n          <Radio.Group\n            onChange={this.handleDelimiterChange}\n            value={this.state.delimiter}\n            size=\"small\"\n          >\n            {[\n              CSVDelimiter.SEMICOLON,\n              CSVDelimiter.COMMA,\n              CSVDelimiter.VARTICAL_BAR\n            ].map((item, index) => (\n              <Radio\n                key={`item_${index}`}\n                value={item}\n              >\n                <small>{item}</small>\n              </Radio>\n            ))}\n          </Radio.Group>\n        </span>\n      </div>\n    </div>\n  )\n\n  render() {\n    return (\n      <>\n        {this.renderConfigBar()}\n        <AceEditor\n          mode=\"text\"\n          theme=\"github\"\n          onChange={this.handleChange}\n          value={this.state.csv}\n          name=\"csv_editor\"\n          width=\"100%\"\n          height={`${this.state.editorHeight}px`}\n          editorProps={{ $blockScrolling: true }}\n        />\n      </>\n    )\n  }\n}","import React, { Component } from \"react\";\nimport { Layout, Menu } from \"antd\";\n\nimport { EditorMode } from \"../App\";\n\ninterface Props {\n  onModeChange: (mode: EditorMode) => void;\n  mode: EditorMode;\n}\n\ninterface State { }\n\nexport const NAVIGATION_HEIGHT = 64;\nexport const CONFIG_BAR_HEIGHT = 40;\n\nexport class Navigation extends Component<Props, State> {\n  renderLogo = () => {\n    return (\n      <div className=\"logo\">\n        CSV Editor\n      </div>\n    );\n  }\n\n  renderButtons = () => {\n    const buttons = [\n      EditorMode.CSV,\n      EditorMode.GRID,\n      EditorMode.JSON\n    ].map(mode => (\n      <Menu.Item\n        key={mode}\n        onClick={() => this.props.onModeChange(mode)}\n      >\n        {mode}\n      </Menu.Item>\n    ));\n\n    return (\n      <Menu\n        theme=\"dark\"\n        mode=\"horizontal\"\n        defaultSelectedKeys={[EditorMode.CSV]}\n        style={{ lineHeight: `${NAVIGATION_HEIGHT}px` }}\n      >\n        {buttons}\n      </Menu>\n    );\n  }\n\n  render() {\n    return (\n      <Layout.Header>\n        {this.renderLogo()}\n        {this.renderButtons()}\n      </Layout.Header>\n    )\n  }\n}","import React, { Component } from \"react\";\nimport AceEditor from \"react-ace\";\nimport brace from \"brace\"; // eslint-disable-line @typescript-eslint/no-unused-vars\n\nimport \"brace/theme/github\";\nimport \"brace/mode/json\";\n\nimport { EditorProps } from \"./types\";\nimport { NAVIGATION_HEIGHT } from \"../components/Navigation\";\n\ninterface Props extends EditorProps { }\n\ninterface State {\n  json: string;\n  editorHeight: number;\n}\n\nconst defaultState: State = {\n  json: \"[]\",\n  editorHeight: 0\n}\n\nexport class JSONEditor extends Component<Props, State> {\n  state = defaultState;\n\n  componentDidMount() {\n    this.updateEditorHeight();\n    this.parseSourceItemsToJson();\n\n    window.addEventListener('resize', () => this.updateEditorHeight());\n  }\n\n  componentWillUnmount() {\n    this.setState(defaultState);\n\n    window.removeEventListener('resize', () => this.updateEditorHeight());\n  }\n\n  updateEditorHeight = () => this.setState({\n    editorHeight: window.innerHeight - NAVIGATION_HEIGHT\n  })\n\n  parseSourceItemsToJson = () => this.setState({\n    json: JSON.stringify(this.props.source, null, 2)\n  });\n\n  handleChange = (json: string) => this.setState({\n    json\n  }, () => this.updateSourceItemsByCsvString());\n\n  updateSourceItemsByCsvString = () => {\n    try {\n      const sourceItems = JSON.parse(this.state.json);\n      this.props.onSourceChange(sourceItems);\n    } catch (e) { }\n  }\n\n  render() {\n    return (\n      <AceEditor\n        mode=\"json\"\n        theme=\"github\"\n        onChange={this.handleChange}\n        value={this.state.json}\n        name=\"csv_editor\"\n        width=\"100%\"\n        height={`${this.state.editorHeight}px`}\n        editorProps={{ $blockScrolling: true }}\n      />\n    )\n  }\n}","import React, { Component } from \"react\";\n// @ts-ignore\nimport Spreadsheet from \"react-spreadsheet\";\nimport { debounce } from \"throttle-debounce\";\n\nimport { EditorProps, CellItem } from \"./types\";\n\ninterface Props extends EditorProps { }\n\ninterface GridCellItem {\n  value: string | number | null;\n}\n\ninterface State {\n  grid: GridCellItem[][],\n  activeRow: number;\n  activeCol: number;\n}\n\ninterface OnActivateOptons {\n  column: number;\n  row: number;\n}\n\nconst DEFAULT_CELL_ACTIVE_INDEX = -1;\nconst MIN_GRID_ROWS = 50;\nconst MIN_GRID_COLUMNS = 26;\n\nfunction getEmptyRow(columnsCount: number): GridCellItem[] {\n  const row = [];\n\n  for (let i = 0; i < columnsCount; i++) {\n    row[i] = { value: '' }\n  }\n\n  return row;\n}\n\nfunction getMultipleEmptyRows(rowsCount: number, columnsCount: number): GridCellItem[][] {\n  const emptyRow = getEmptyRow(columnsCount);\n\n  const rows = [];\n\n  for (let i = 0; i < rowsCount; i++) {\n    rows[i] = emptyRow\n  }\n\n  return rows;\n}\n\nconst defaultState: State = {\n  activeRow: DEFAULT_CELL_ACTIVE_INDEX,\n  activeCol: DEFAULT_CELL_ACTIVE_INDEX,\n  grid: []\n}\n\nexport class DataGridEditor extends Component<Props, State> {\n  state = defaultState;\n\n  componentDidMount() {\n    this.parseSourceItemsToGrid();\n  }\n\n  componentWillUnmount() {\n    this.addNewRowIfLastIsActive();\n    this.setState(defaultState);\n  }\n\n  parseSourceItemsToGrid = () => {\n    const { source } = this.props;\n\n    const sourceRowsLength = source.length;\n\n    const grid: GridCellItem[][] = [];\n\n    for (let rowIndex = 0; rowIndex < sourceRowsLength; rowIndex++) {\n      const row = source[rowIndex];\n\n      if (!row) {\n        continue;\n      }\n\n      const rowColumnsLength = row.length;\n\n      if (!grid[rowIndex]) {\n        grid[rowIndex] = [];\n      }\n\n      for (let rowCellIndex = 0; rowCellIndex < rowColumnsLength; rowCellIndex++) {\n        const _cell = row[rowCellIndex];\n\n        grid[rowIndex][rowCellIndex] = {\n          value: _cell\n        };\n      }\n\n      const columnsToAdd = MIN_GRID_COLUMNS - rowColumnsLength;\n\n      for (let addColumnIndex = 0; addColumnIndex < columnsToAdd; addColumnIndex++) {\n        grid[rowIndex][rowColumnsLength + addColumnIndex] = {\n          value: \"\"\n        };\n      }\n    }\n\n    const rowsToAdd = MIN_GRID_ROWS - sourceRowsLength;\n    const emptyRow = getEmptyRow(grid[0] ? grid[0].length : MIN_GRID_COLUMNS);\n\n    for (let addRowIndex = 0; addRowIndex < rowsToAdd; addRowIndex++) {\n      grid[sourceRowsLength + addRowIndex] = emptyRow;\n    }\n\n    return this.setState({\n      grid\n    });\n  }\n\n  updateSourceItemsByDataGrid = () => {\n    const { grid } = this.state;\n\n    const sourceItems: CellItem[][] = [];\n\n    const reverseGridRows = [...grid].reverse();\n    const notEmptyGridRowIndex = reverseGridRows.findIndex(rowCells => rowCells.some(cell => Boolean(cell.value)));\n    const gridRows = reverseGridRows.slice(notEmptyGridRowIndex).reverse();\n\n    for (let gridRowIndex = 0, gridRowsLength = gridRows.length; gridRowIndex < gridRowsLength; gridRowIndex++) {\n      if (!sourceItems[gridRowIndex]) {\n        sourceItems[gridRowIndex] = []\n      }\n\n      const reverseGridRows = [...gridRows[gridRowIndex]].reverse();\n\n      const notEmptyCellIndex = reverseGridRows.findIndex(item => Boolean(item.value));\n      const nonEmptyCells = reverseGridRows.slice(notEmptyCellIndex).reverse();\n\n      if (notEmptyCellIndex < 0) {\n        continue;\n      }\n\n      for (let nonEmptyCellIndex = 0; nonEmptyCellIndex < nonEmptyCells.length; nonEmptyCellIndex++) {\n        const _cell = nonEmptyCells[nonEmptyCellIndex];\n\n        sourceItems[gridRowIndex][nonEmptyCellIndex] = _cell.value;\n      }\n    }\n\n    this.props.onSourceChange(sourceItems);\n  }\n\n  addNewRowIfLastIsActive = () => {\n    const { activeRow, grid } = this.state;\n\n    if (activeRow === (grid.length - 1)) {\n      this.setState({\n        grid: [\n          ...grid,\n          ...getMultipleEmptyRows(10, grid[0] ? grid[0].length : MIN_GRID_COLUMNS)\n        ]\n      });\n    }\n  }\n\n  onActivate = ({ column, row }: OnActivateOptons) => this.setState({\n    activeCol: column,\n    activeRow: row\n  });\n\n  onChange = debounce(100, (grid: GridCellItem[][]) => this.setState({\n    grid\n  }, () => this.updateSourceItemsByDataGrid()));\n\n  render() {\n    return (\n      <Spreadsheet\n        onChange={this.onChange}\n        onActivate={this.onActivate}\n        data={this.state.grid}\n      />\n    )\n  }\n}","import React, { Component } from \"react\";\n\nimport { Navigation } from \"./components/Navigation\";\nimport { SourceItems } from \"./editors/types\";\nimport { CSVEditor } from \"./editors/CSVEditor\";\nimport { JSONEditor } from \"./editors/JSONEditor\";\nimport { DataGridEditor } from \"./editors/DataGridEditor\";\n\nimport \"./App.css\";\n\nexport enum EditorMode {\n  CSV = \"CSV\",\n  GRID = \"GRID\",\n  JSON = \"JSON\"\n}\n\ninterface AppProps { }\n\ninterface AppState {\n  mode: EditorMode;\n  source: SourceItems;\n}\n\nconst modeToComponentMap = Object.freeze({\n  [EditorMode.CSV]: CSVEditor,\n  [EditorMode.JSON]: JSONEditor,\n  [EditorMode.GRID]: DataGridEditor,\n})\n\nexport class App extends Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n    this.state = {\n      mode: EditorMode.CSV,\n      source: []\n    }\n  }\n\n  handleModeChange = (mode: EditorMode) => this.setState({ mode })\n\n  handleSourceChange = (source: SourceItems) => this.setState({ source })\n\n  render() {\n    const EditorComponent = modeToComponentMap[this.state.mode] || <div>Error</div>;\n\n    return (\n      <div>\n        <Navigation\n          mode={this.state.mode}\n          onModeChange={this.handleModeChange}\n        />\n        <main className=\"Editor\" >\n          <EditorComponent\n            onSourceChange={this.handleSourceChange}\n            source={this.state.source}\n          />\n        </main>\n      </div>\n    )\n  }\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}