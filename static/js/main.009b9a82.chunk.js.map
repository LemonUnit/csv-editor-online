{"version":3,"sources":["editors/CSVEditor.tsx","components/Navigation.tsx","components/Footer.tsx","editors/JSONEditor.tsx","editors/DataGridEditor.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["CSVDelimiter","NAVIGATION_HEIGHT","CONFIG_BAR_HEIGHT","Navigation","renderLogo","className","renderButtons","buttons","EditorMode","CSV","GRID","JSON","map","mode","Item","key","onClick","props","onModeChange","theme","defaultSelectedKeys","style","lineHeight","Header","this","Component","FOOTER_HEIGHT","Footer","renderGithubLink","href","target","title","type","renderLemonUnitLink","src","alt","span","textAlign","defaultState","csv","editorHeight","delimiter","SEMICOLON","CSVEditor","state","window","localStorage","getItem","updateEditorHeight","setState","innerHeight","parseSourceItemsToCsv","csvString","source","updateSourceItemsByCsvString","sourceItems","onSourceChange","handleChange","handleDelimiterChange","e","value","trim","updateDelimiter","confirm","content","onOk","updateCSVStringDelimiter","onCancel","setItem","renderConfigBar","Group","onChange","size","COMMA","VARTICAL_BAR","item","index","addEventListener","removeEventListener","name","width","height","editorProps","$blockScrolling","json","JSONEditor","parseSourceItemsToJson","stringify","parse","MIN_GRID_ROWS","MIN_GRID_COLUMNS","getEmptyRow","columnsCount","row","i","getMultipleEmptyRows","rowsCount","emptyRow","rows","activeRow","activeCol","grid","DataGridEditor","parseSourceItemsToGrid","sourceRowsLength","length","rowIndex","rowColumnsLength","rowCellIndex","_cell","columnsToAdd","addColumnIndex","rowsToAdd","addRowIndex","updateSourceItemsByDataGrid","reverseGridRows","reverse","notEmptyGridRowIndex","findIndex","rowCells","some","cell","Boolean","gridRows","slice","gridRowIndex","gridRowsLength","notEmptyCellIndex","nonEmptyCells","nonEmptyCellIndex","addNewRowIfLastIsActive","onActivate","column","debounce","data","modeToComponentMap","Object","freeze","App","handleModeChange","handleSourceChange","EditorComponent","isLocalhost","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","process","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.009b9a82.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport AceEditor from \"react-ace\";\nimport { Radio, Modal } from \"antd\";\nimport { RadioChangeEvent } from \"antd/lib/radio\";\n// @ts-ignore\nimport * as csvString from \"csv-string\";\nimport brace from \"brace\"; // eslint-disable-line @typescript-eslint/no-unused-vars\n\nimport \"brace/theme/github\";\nimport \"brace/mode/json\";\n\nimport { EditorProps } from \"./types\";\nimport { NAVIGATION_HEIGHT, CONFIG_BAR_HEIGHT } from \"../components/Navigation\";\nimport { FOOTER_HEIGHT } from \"../components/Footer\";\n\nenum CSVDelimiter {\n  SEMICOLON = \";\",\n  COMMA = \",\",\n  VARTICAL_BAR = \"|\"\n}\n\ninterface Props extends EditorProps { }\n\ninterface State {\n  csv: string;\n  delimiter: CSVDelimiter;\n  editorHeight: number;\n}\n\nconst defaultState: State = {\n  csv: \"\",\n  editorHeight: 0,\n  delimiter: CSVDelimiter.SEMICOLON\n}\n\nexport class CSVEditor extends Component<Props, State> {\n  state = {\n    ...defaultState,\n    delimiter: 'localStorage' in window\n      ? window.localStorage.getItem('delimiter') as CSVDelimiter || CSVDelimiter.SEMICOLON\n      : CSVDelimiter.SEMICOLON\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', () => this.updateEditorHeight())\n\n    this.updateEditorHeight()\n    this.parseSourceItemsToCsv();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', () => this.updateEditorHeight())\n\n    this.setState(defaultState);\n  }\n\n  updateEditorHeight = () => this.setState({\n    editorHeight: window.innerHeight - NAVIGATION_HEIGHT - FOOTER_HEIGHT - CONFIG_BAR_HEIGHT\n  })\n\n  parseSourceItemsToCsv = () => this.setState({\n    csv: csvString.stringify(this.props.source, this.state.delimiter)\n  });\n\n  updateSourceItemsByCsvString = () => {\n    const sourceItems = csvString.parse(this.state.csv, this.state.delimiter);\n\n    this.props.onSourceChange(sourceItems);\n  }\n\n  handleChange = (csv: string) => this.setState({\n    csv\n  }, () => this.updateSourceItemsByCsvString());\n\n  handleDelimiterChange = (e: RadioChangeEvent) => {\n    const { value } = e.target;\n\n    if (!this.state.csv.trim()) {\n      return this.updateDelimiter(value);\n    }\n\n    Modal.confirm({\n      title: 'Do you want to update CSV string to new delimiter?',\n      content: '',\n      onOk: () => this.updateCSVStringDelimiter(value),\n      onCancel: () => this.updateDelimiter(value)\n    });\n  }\n\n  updateCSVStringDelimiter = (delimiter: CSVDelimiter) => this.setState({\n    csv: csvString.stringify(csvString.parse(this.state.csv, this.state.delimiter), delimiter)\n  }, () => this.updateDelimiter(delimiter));\n\n  updateDelimiter = (delimiter: CSVDelimiter) => this.setState({\n    delimiter\n  }, () => {\n    if ('localStorage' in window) {\n      window.localStorage.setItem('delimiter', delimiter);\n    }\n  });\n\n  renderConfigBar = () => (\n    <div className=\"ConfigBar\">\n      <div className=\"ConfigBarWidget\">\n        <span className=\"ConfigBarWidgetLabel\">CSV Delimeter:</span>\n        <span className=\"ConfigBarWidgetContent\">\n          <Radio.Group\n            onChange={this.handleDelimiterChange}\n            value={this.state.delimiter}\n            size=\"small\"\n          >\n            {[\n              CSVDelimiter.SEMICOLON,\n              CSVDelimiter.COMMA,\n              CSVDelimiter.VARTICAL_BAR\n            ].map((item, index) => (\n              <Radio\n                key={`item_${index}`}\n                value={item}\n              >\n                <small>{item}</small>\n              </Radio>\n            ))}\n          </Radio.Group>\n        </span>\n      </div>\n    </div>\n  )\n\n  render() {\n    return (\n      <>\n        {this.renderConfigBar()}\n        <AceEditor\n          mode=\"text\"\n          theme=\"github\"\n          onChange={this.handleChange}\n          value={this.state.csv}\n          name=\"csv_editor\"\n          width=\"100%\"\n          height={`${this.state.editorHeight}px`}\n          editorProps={{ $blockScrolling: true }}\n        />\n      </>\n    )\n  }\n}","import React, { Component } from \"react\";\nimport { Layout, Menu, Icon } from \"antd\";\n\nimport { EditorMode } from \"../App\";\n\ninterface Props {\n  onModeChange: (mode: EditorMode) => void;\n  mode: EditorMode;\n}\n\ninterface State { }\n\nexport const NAVIGATION_HEIGHT = 64;\nexport const CONFIG_BAR_HEIGHT = 40;\n\nexport class Navigation extends Component<Props, State> {\n  renderLogo = () => {\n    return (\n      <div className=\"logo\">\n        CSV Editor\n      </div>\n    );\n  }\n\n  renderButtons = () => {\n    const buttons = [\n      EditorMode.CSV,\n      EditorMode.GRID,\n      EditorMode.JSON\n    ].map(mode => (\n      <Menu.Item\n        key={mode}\n        onClick={() => this.props.onModeChange(mode)}\n      >\n        {mode}\n      </Menu.Item>\n    ));\n\n    return (\n      <Menu\n        theme=\"dark\"\n        mode=\"horizontal\"\n        defaultSelectedKeys={[EditorMode.CSV]}\n        style={{ lineHeight: `${NAVIGATION_HEIGHT}px` }}\n      >\n        {buttons}\n      </Menu>\n    );\n  }\n\n  render() {\n    return (\n      <Layout.Header>\n        {this.renderLogo()}\n        {this.renderButtons()}\n      </Layout.Header>\n    )\n  }\n}","import React, { Component } from \"react\";\nimport { Icon, Row, Col } from \"antd\";\n\ninterface Props { }\ninterface State { }\n\nexport const FOOTER_HEIGHT = 30;\n\nexport class Footer extends Component<Props, State> {\n  renderGithubLink = () => {\n    return (\n      <a\n        href=\"https://github.com/LemonUnit/csv-editor-online\"\n        target=\"_blank\"\n        className=\"GitHubIcon\"\n        title=\"Go to CSV Editor Online page on GitHub\"\n      >\n        <Icon type=\"github\" />\n      </a>\n\n    );\n  }\n\n  renderLemonUnitLink = () => {\n    return (\n      <a\n        href=\"https://lemonunit.com/\"\n        target=\"_blank\"\n        className=\"LemonUnitIcon\"\n        title=\"Go to LemonUnit home page\"\n      >\n        <img src=\"lemonunit-logo.png\" alt=\"LemonUnit logo\" />\n      </a>\n    );\n  }\n\n  render() {\n    return (\n      <footer className=\"Footer\">\n        <Row>\n          <Col span={12}>\n            {this.renderLemonUnitLink()}\n          </Col>\n          <Col span={12} style={{ textAlign: 'right' }}>\n            {this.renderGithubLink()}\n          </Col>\n        </Row>\n      </footer>\n    )\n  }\n}","import React, { Component } from \"react\";\nimport AceEditor from \"react-ace\";\nimport brace from \"brace\"; // eslint-disable-line @typescript-eslint/no-unused-vars\n\nimport \"brace/theme/github\";\nimport \"brace/mode/json\";\n\nimport { EditorProps } from \"./types\";\nimport { NAVIGATION_HEIGHT } from \"../components/Navigation\";\nimport { FOOTER_HEIGHT } from \"../components/Footer\";\n\ninterface Props extends EditorProps { }\n\ninterface State {\n  json: string;\n  editorHeight: number;\n}\n\nconst defaultState: State = {\n  json: \"[]\",\n  editorHeight: 0\n}\n\nexport class JSONEditor extends Component<Props, State> {\n  state = defaultState;\n\n  componentDidMount() {\n    this.updateEditorHeight();\n    this.parseSourceItemsToJson();\n\n    window.addEventListener('resize', () => this.updateEditorHeight());\n  }\n\n  componentWillUnmount() {\n    this.setState(defaultState);\n\n    window.removeEventListener('resize', () => this.updateEditorHeight());\n  }\n\n  updateEditorHeight = () => this.setState({\n    editorHeight: window.innerHeight - FOOTER_HEIGHT - NAVIGATION_HEIGHT\n  })\n\n  parseSourceItemsToJson = () => this.setState({\n    json: JSON.stringify(this.props.source, null, 2)\n  });\n\n  handleChange = (json: string) => this.setState({\n    json\n  }, () => this.updateSourceItemsByCsvString());\n\n  updateSourceItemsByCsvString = () => {\n    try {\n      const sourceItems = JSON.parse(this.state.json);\n      this.props.onSourceChange(sourceItems);\n    } catch (e) { }\n  }\n\n  render() {\n    return (\n      <AceEditor\n        mode=\"json\"\n        theme=\"github\"\n        onChange={this.handleChange}\n        value={this.state.json}\n        name=\"csv_editor\"\n        width=\"100%\"\n        height={`${this.state.editorHeight}px`}\n        editorProps={{ $blockScrolling: true }}\n      />\n    )\n  }\n}","import React, { Component } from \"react\";\n// @ts-ignore\nimport Spreadsheet from \"react-spreadsheet\";\nimport { debounce } from \"throttle-debounce\";\n\nimport { EditorProps, CellItem } from \"./types\";\n\ninterface Props extends EditorProps { }\n\ninterface GridCellItem {\n  value: string | number | null;\n}\n\ninterface State {\n  grid: GridCellItem[][],\n  activeRow: number;\n  activeCol: number;\n}\n\ninterface OnActivateOptons {\n  column: number;\n  row: number;\n}\n\nconst DEFAULT_CELL_ACTIVE_INDEX = -1;\nconst MIN_GRID_ROWS = 50;\nconst MIN_GRID_COLUMNS = 26;\n\nfunction getEmptyRow(columnsCount: number): GridCellItem[] {\n  const row = [];\n\n  for (let i = 0; i < columnsCount; i++) {\n    row[i] = { value: '' }\n  }\n\n  return row;\n}\n\nfunction getMultipleEmptyRows(rowsCount: number, columnsCount: number): GridCellItem[][] {\n  const emptyRow = getEmptyRow(columnsCount);\n\n  const rows = [];\n\n  for (let i = 0; i < rowsCount; i++) {\n    rows[i] = emptyRow\n  }\n\n  return rows;\n}\n\nconst defaultState: State = {\n  activeRow: DEFAULT_CELL_ACTIVE_INDEX,\n  activeCol: DEFAULT_CELL_ACTIVE_INDEX,\n  grid: []\n}\n\nexport class DataGridEditor extends Component<Props, State> {\n  state = defaultState;\n\n  componentDidMount() {\n    this.parseSourceItemsToGrid();\n  }\n\n  componentWillUnmount() {\n    this.addNewRowIfLastIsActive();\n    this.setState(defaultState);\n  }\n\n  parseSourceItemsToGrid = () => {\n    const { source } = this.props;\n\n    const sourceRowsLength = source.length;\n\n    const grid: GridCellItem[][] = [];\n\n    for (let rowIndex = 0; rowIndex < sourceRowsLength; rowIndex++) {\n      const row = source[rowIndex];\n\n      if (!row) {\n        continue;\n      }\n\n      const rowColumnsLength = row.length;\n\n      if (!grid[rowIndex]) {\n        grid[rowIndex] = [];\n      }\n\n      for (let rowCellIndex = 0; rowCellIndex < rowColumnsLength; rowCellIndex++) {\n        const _cell = row[rowCellIndex];\n\n        grid[rowIndex][rowCellIndex] = {\n          value: _cell\n        };\n      }\n\n      const columnsToAdd = MIN_GRID_COLUMNS - rowColumnsLength;\n\n      for (let addColumnIndex = 0; addColumnIndex < columnsToAdd; addColumnIndex++) {\n        grid[rowIndex][rowColumnsLength + addColumnIndex] = {\n          value: \"\"\n        };\n      }\n    }\n\n    const rowsToAdd = MIN_GRID_ROWS - sourceRowsLength;\n    const emptyRow = getEmptyRow(grid[0] ? grid[0].length : MIN_GRID_COLUMNS);\n\n    for (let addRowIndex = 0; addRowIndex < rowsToAdd; addRowIndex++) {\n      grid[sourceRowsLength + addRowIndex] = emptyRow;\n    }\n\n    return this.setState({\n      grid\n    });\n  }\n\n  updateSourceItemsByDataGrid = () => {\n    const { grid } = this.state;\n\n    const sourceItems: CellItem[][] = [];\n\n    const reverseGridRows = [...grid].reverse();\n    const notEmptyGridRowIndex = reverseGridRows.findIndex(rowCells => rowCells.some(cell => Boolean(cell.value)));\n    const gridRows = reverseGridRows.slice(notEmptyGridRowIndex).reverse();\n\n    for (let gridRowIndex = 0, gridRowsLength = gridRows.length; gridRowIndex < gridRowsLength; gridRowIndex++) {\n      if (!sourceItems[gridRowIndex]) {\n        sourceItems[gridRowIndex] = []\n      }\n\n      const reverseGridRows = [...gridRows[gridRowIndex]].reverse();\n\n      const notEmptyCellIndex = reverseGridRows.findIndex(item => Boolean(item.value));\n      const nonEmptyCells = reverseGridRows.slice(notEmptyCellIndex).reverse();\n\n      if (notEmptyCellIndex < 0) {\n        continue;\n      }\n\n      for (let nonEmptyCellIndex = 0; nonEmptyCellIndex < nonEmptyCells.length; nonEmptyCellIndex++) {\n        const _cell = nonEmptyCells[nonEmptyCellIndex];\n\n        sourceItems[gridRowIndex][nonEmptyCellIndex] = _cell.value;\n      }\n    }\n\n    this.props.onSourceChange(sourceItems);\n  }\n\n  addNewRowIfLastIsActive = () => {\n    const { activeRow, grid } = this.state;\n\n    if (activeRow === (grid.length - 1)) {\n      this.setState({\n        grid: [\n          ...grid,\n          ...getMultipleEmptyRows(10, grid[0] ? grid[0].length : MIN_GRID_COLUMNS)\n        ]\n      });\n    }\n  }\n\n  onActivate = ({ column, row }: OnActivateOptons) => this.setState({\n    activeCol: column,\n    activeRow: row\n  });\n\n  onChange = debounce(100, (grid: GridCellItem[][]) => this.setState({\n    grid\n  }, () => this.updateSourceItemsByDataGrid()));\n\n  render() {\n    return (\n      <Spreadsheet\n        onChange={this.onChange}\n        onActivate={this.onActivate}\n        data={this.state.grid}\n      />\n    )\n  }\n}","import React, { Component } from \"react\";\n\nimport { Navigation } from \"./components/Navigation\";\nimport { Footer } from \"./components/Footer\";\n\nimport { SourceItems } from \"./editors/types\";\nimport { CSVEditor } from \"./editors/CSVEditor\";\nimport { JSONEditor } from \"./editors/JSONEditor\";\nimport { DataGridEditor } from \"./editors/DataGridEditor\";\n\nimport \"./App.css\";\n\nexport enum EditorMode {\n  CSV = \"CSV\",\n  GRID = \"GRID\",\n  JSON = \"JSON\"\n}\n\ninterface AppProps { }\n\ninterface AppState {\n  mode: EditorMode;\n  source: SourceItems;\n}\n\nconst modeToComponentMap = Object.freeze({\n  [EditorMode.CSV]: CSVEditor,\n  [EditorMode.JSON]: JSONEditor,\n  [EditorMode.GRID]: DataGridEditor,\n})\n\nexport class App extends Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n    this.state = {\n      mode: EditorMode.CSV,\n      source: []\n    }\n  }\n\n  handleModeChange = (mode: EditorMode) => this.setState({ mode })\n\n  handleSourceChange = (source: SourceItems) => this.setState({ source })\n\n  render() {\n    const EditorComponent = modeToComponentMap[this.state.mode] || <div>Error</div>;\n\n    return (\n      <div>\n        <Navigation\n          mode={this.state.mode}\n          onModeChange={this.handleModeChange}\n        />\n        <main className=\"Editor\" >\n          <EditorComponent\n            onSourceChange={this.handleSourceChange}\n            source={this.state.source}\n          />\n        </main>\n        <Footer />\n      </div>\n    )\n  }\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}